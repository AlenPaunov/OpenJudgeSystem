@using Resource = Resources.Areas.Administration.Contests.Views.EditorTemplates.CategoryDropDown;
@model int?

@(Html.Kendo().ComboBoxFor(m=>m)
      .Name("categories")
      .Filter(FilterType.Contains)
      .Placeholder("Select category")
      .DataTextField("Name")
      .DataValueField("Value")
      .DataSource(data =>
      {
          data.ServerFiltering(true)
              .Read(read => read.Action("GetCategories", "Contests").Data("filterContests"));
      })
      .SelectedIndex(0)
      .HtmlAttributes(new{style="width:100%"}))

<script>
    function categoryDropdownTemplate(data){
        if(data.Parent == undefined) {
            return data.Name;
        }
        else {
            return data.Parent + " - " + data.Name;
        }
    };
</script>
<script>
    function filterContests() {
        var input = $("#categories").data("kendoComboBox").input.val();
        return {
            contestFilter: input
    }
}
</script>
